import{r as a,j as e}from"./react-vendor-C6XT1RV9.js";import{a as n}from"./vendor-6GNEkk8L.js";import"./chart-vendor-CjLmMr0g.js";const f=()=>{const[x,h]=a.useState([]),[y,o]=a.useState(!1),[i,m]=a.useState(null),[r,c]=a.useState({first_name:"",last_name:"",email:"",position:"",salary:"",hire_date:""});a.useEffect(()=>{d()},[]);const d=async()=>{try{const s=await n.get("https://tomlin-backend.onrender.com/api/employees/");h(s.data)}catch(s){console.error("Error fetching employees",s)}},b=s=>{c({...r,[s.target.name]:s.target.value})},u=async s=>{var l;s.preventDefault();try{const t={...r,user:null};i?await n.put(`https://tomlin-backend.onrender.com/api/employees/${i.id}/`,t):await n.post("https://tomlin-backend.onrender.com/api/employees/",t),d(),p()}catch(t){console.error("Error submitting employee data:",t),alert("Error: "+((l=t.response)!=null&&l.data?JSON.stringify(t.response.data):t.message))}},j=s=>{m(s),c(s),o(!0)},N=async s=>{if(window.confirm("Are you sure you want to delete this employee?"))try{await n.delete(`https://tomlin-backend.onrender.com/api/employees/${s}/`),d()}catch(l){console.error("Error deleting employee",l),alert("Failed to delete employee")}},p=()=>{o(!1),m(null),c({first_name:"",last_name:"",email:"",position:"",salary:"",hire_date:""})};return e.jsxs("div",{className:"container mx-auto p-4 h-screen max-h-screen overflow-y-auto",children:[e.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Add Employee"}),e.jsxs("table",{className:"min-w-full mt-4 border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2",children:"Name"}),e.jsx("th",{className:"border px-4 py-2",children:"Email"}),e.jsx("th",{className:"border px-4 py-2",children:"Position"}),e.jsx("th",{className:"border px-4 py-2",children:"Salary"}),e.jsx("th",{className:"border px-4 py-2",children:"Hire Date"}),e.jsx("th",{className:"border px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:x.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{className:"border px-4 py-2",children:[s.first_name," ",s.last_name]}),e.jsx("td",{className:"border px-4 py-2",children:s.email}),e.jsx("td",{className:"border px-4 py-2",children:s.position}),e.jsx("td",{className:"border px-4 py-2",children:s.salary}),e.jsx("td",{className:"border px-4 py-2",children:s.hire_date}),e.jsxs("td",{className:"border px-4 py-2",children:[e.jsx("button",{onClick:()=>j(s),className:"px-3 py-1 bg-yellow-500 text-white rounded",children:"Edit"}),e.jsx("button",{onClick:()=>N(s.id),className:"px-3 py-1 bg-red-500 text-white rounded ml-2",children:"Delete"})]})]},s.id))})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-96",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:i?"Edit Employee":"Add Employee"}),e.jsxs("form",{onSubmit:u,children:[Object.keys(r).map(s=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1 capitalize",children:s.replace("_"," ")}),e.jsx("input",{type:s==="hire_date"?"date":s==="salary"?"number":"text",name:s,value:r[s],onChange:b,className:"border w-full p-2 rounded",required:!0})]},s)),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-gray-500 text-white rounded",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-500 text-white rounded",children:"Save"})]})]})]})})]})},v=()=>e.jsx("div",{className:"flex h-screen",children:e.jsx("div",{className:"flex flex-col flex-1",children:e.jsxs("div",{className:"p-6 bg-gray-100",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Employees Management"})}),e.jsx(f,{})]})})});export{v as default};
//# sourceMappingURL=EmployeesPage-Ba4ZEedd.js.map
