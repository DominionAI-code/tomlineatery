import{r as l,j as e}from"./react-vendor-C6XT1RV9.js";import{a as x}from"./vendor-6GNEkk8L.js";import"./chart-vendor-CjLmMr0g.js";const m="https://tomlin-backend.onrender.com",R=()=>{const[b,v]=l.useState([]),[w,_]=l.useState([]),[y,I]=l.useState([]),[S,C]=l.useState(0),[i,r]=l.useState({inventory:!1,orders:!1,expenses:!1}),[g,A]=l.useState({show:!1,message:"",type:""}),[a,u]=l.useState({item_name:"",quantity:"",purchase_price:"",sale_price:"",menu_item:""}),[n,p]=l.useState({description:"",amount:"",date:new Date().toISOString().split("T")[0],category:"Utilities"});l.useEffect(()=>{f(),F(),D()},[]);const o=(t,s="success")=>{A({show:!0,message:t,type:s}),setTimeout(()=>A({show:!1,message:"",type:""}),3e3)},f=async()=>{r(t=>({...t,inventory:!0}));try{const t=await x.get(`${m}/api/inventory/`);v(Array.isArray(t.data)?t.data:[])}catch(t){console.error("Error fetching inventory:",t),o("Failed to fetch inventory","error"),v([])}finally{r(t=>({...t,inventory:!1}))}},F=async()=>{r(t=>({...t,orders:!0}));try{const t=await x.get(`${m}/api/orders/`),s=Array.isArray(t.data)?t.data:[],j=[...s].sort((c,h)=>new Date(h.created_at||h.date||0)-new Date(c.created_at||c.date||0));_(j);const N=s.reduce((c,h)=>c+(parseFloat(h.amount)||0),0);C(N)}catch(t){console.error("Error fetching orders:",t),o("Failed to fetch orders","error"),_([])}finally{r(t=>({...t,orders:!1}))}},D=async()=>{r(t=>({...t,expenses:!0}));try{const t=await x.get(`${m}/api/reports/expenses/`),j=[...Array.isArray(t.data)?t.data:[]].sort((N,c)=>new Date(c.date||0)-new Date(N.date||0));I(j)}catch(t){console.error("Error fetching expenses:",t),o("Failed to fetch expenses","error"),I([])}finally{r(t=>({...t,expenses:!1}))}},P=async t=>{t.preventDefault(),r(s=>({...s,inventory:!0}));try{await x.post(`${m}/api/inventory/`,a),f(),o("Inventory item added successfully"),u({item_name:"",quantity:"",purchase_price:"",sale_price:"",menu_item:""})}catch(s){console.error("Error adding inventory:",s),o("Failed to add inventory item","error")}finally{r(s=>({...s,inventory:!1}))}},$=async t=>{if(window.confirm("Are you sure you want to delete this item?")){r(s=>({...s,inventory:!0}));try{await x.delete(`${m}/api/inventory/${t}/`),o("Item deleted successfully"),f()}catch(s){console.error("Error deleting inventory:",s),o("Failed to delete item","error")}finally{r(s=>({...s,inventory:!1}))}}},L=async t=>{t.preventDefault(),r(s=>({...s,expenses:!0}));try{await x.post(`${m}/api/reports/expenses/`,n),D(),o("Expense added successfully"),p({description:"",amount:"",date:new Date().toISOString().split("T")[0],category:"Utilities"})}catch(s){console.error("Error adding expense:",s),o("Failed to add expense","error")}finally{r(s=>({...s,expenses:!1}))}},d=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),E=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",T=b.reduce((t,s)=>t+s.quantity*s.purchase_price,0),U=y.reduce((t,s)=>t+parseFloat(s.total_expenses||s.amount||0),0),q=S-U,O=["Utilities","Rent","Salaries","Supplies","Maintenance","Marketing","Insurance","Other"];return e.jsxs("div",{className:"p-6 bg-gray-50 h-screen max-h-screen overflow-y-auto",children:[g.show&&e.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg ${g.type==="error"?"bg-red-500":"bg-green-500"} text-white`,children:g.message}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-md transition-shadow",children:[e.jsx("h3",{className:"text-gray-500 text-sm font-medium mb-1",children:"Total Inventory Value"}),e.jsx("p",{className:"text-2xl font-bold",children:d(T)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-md transition-shadow",children:[e.jsx("h3",{className:"text-gray-500 text-sm font-medium mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:d(S)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-md transition-shadow",children:[e.jsx("h3",{className:"text-gray-500 text-sm font-medium mb-1",children:"Net Profit"}),e.jsx("p",{className:`text-2xl font-bold ${q>=0?"text-green-600":"text-red-600"}`,children:d(q)})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Stock Inventory"}),i.inventory&&e.jsx("div",{className:"text-blue-500",children:"Loading..."})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Item Name"}),e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Quantity"}),e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Purchase Price"}),e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Sale Price"}),e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Total Value"}),e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Action"})]})}),e.jsx("tbody",{children:b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-4 text-center text-gray-500",children:"No inventory items found"})}):b.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 border-b",children:t.item_name}),e.jsx("td",{className:"px-4 py-3 border-b",children:t.quantity}),e.jsx("td",{className:"px-4 py-3 border-b",children:d(t.purchase_price)}),e.jsx("td",{className:"px-4 py-3 border-b",children:d(t.sale_price)}),e.jsx("td",{className:"px-4 py-3 border-b",children:d(t.quantity*t.purchase_price)}),e.jsx("td",{className:"px-4 py-3 border-b",children:e.jsx("button",{onClick:()=>$(t.id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded transition-colors",children:"Delete"})})]},t.id))})]})}),e.jsxs("form",{onSubmit:P,className:"mt-6 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Add New Item"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Item Name",value:a.item_name,onChange:t=>u({...a,item_name:t.target.value}),className:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),e.jsx("input",{type:"number",placeholder:"Quantity",value:a.quantity,onChange:t=>u({...a,quantity:t.target.value}),className:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,min:"0"}),e.jsx("input",{type:"number",placeholder:"Purchase Price",value:a.purchase_price,onChange:t=>u({...a,purchase_price:t.target.value}),className:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,min:"0",step:"0.01"}),e.jsx("input",{type:"number",placeholder:"Sale Price",value:a.sale_price,onChange:t=>u({...a,sale_price:t.target.value}),className:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,min:"0",step:"0.01"}),e.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors",disabled:i.inventory,children:i.inventory?"Adding...":"Add Item"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Expenses"}),i.expenses&&e.jsx("div",{className:"text-blue-500",children:"Loading..."})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Date"}),e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Category"}),e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Amount"})]})}),e.jsx("tbody",{children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-4 py-4 text-center text-gray-500",children:"No expenses found"})}):y.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 border-b",children:E(t.date)}),e.jsx("td",{className:"px-4 py-3 border-b",children:t.description}),e.jsx("td",{className:"px-4 py-3 border-b",children:t.category||"Uncategorized"}),e.jsx("td",{className:"px-4 py-3 border-b text-red-600",children:d(t.total_expenses||t.amount)})]},t.id))})]})}),e.jsxs("form",{onSubmit:L,className:"mt-6 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Add New Expense"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("input",{type:"date",value:n.date,onChange:t=>p({...n,date:t.target.value}),className:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),e.jsx("input",{type:"text",placeholder:"Description",value:n.description,onChange:t=>p({...n,description:t.target.value}),className:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),e.jsx("select",{value:n.category,onChange:t=>p({...n,category:t.target.value}),className:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:O.map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"number",placeholder:"Amount",value:n.amount,onChange:t=>p({...n,amount:t.target.value}),className:"p-2 border border-gray-300 rounded-l focus:outline-none focus:ring-2 focus:ring-blue-500 flex-grow",required:!0,min:"0",step:"0.01"}),e.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-r transition-colors",disabled:i.expenses,children:i.expenses?"Adding...":"Add"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Recent Transactions"}),i.orders&&e.jsx("div",{className:"text-blue-500",children:"Loading..."})]}),w.length===0?e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No transactions found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Order ID"}),e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Date"}),e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 border-b font-semibold text-sm text-gray-700",children:"Amount"})]})}),e.jsx("tbody",{children:w.slice(0,20).map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 border-b",children:t.id}),e.jsx("td",{className:"px-4 py-3 border-b",children:E(t.created_at||t.date)}),e.jsx("td",{className:"px-4 py-3 border-b",children:t.customer_name}),e.jsx("td",{className:"px-4 py-3 border-b font-medium text-green-600",children:d(t.amount)})]},t.id))})]})})]})]})},Q=()=>e.jsx("div",{className:"flex h-screen",children:e.jsx("div",{className:"flex flex-col flex-1",children:e.jsxs("div",{className:"p-6 bg-gray-100",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Inventory Management"})}),e.jsx(R,{})]})})});export{Q as default};
//# sourceMappingURL=InventoryPage-BLe47G9o.js.map
