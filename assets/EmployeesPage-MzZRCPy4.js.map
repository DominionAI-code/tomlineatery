{"version":3,"file":"EmployeesPage-MzZRCPy4.js","sources":["../../src/components/EmployeeList.jsx","../../src/pages/EmployeesPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst EmployeeList = () => {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [editingEmployee, setEditingEmployee] = useState(null);\r\n  const [formData, setFormData] = useState({\r\n    first_name: \"\",\r\n    last_name: \"\",\r\n    email: \"\",\r\n    position: \"\",\r\n    salary: \"\",\r\n    hire_date: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchEmployees();\r\n  }, []);\r\n\r\n  const fetchEmployees = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        \"https://tomlin-backend.onrender.com/api/employees/\"\r\n      );\r\n      setEmployees(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching employees\", error);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const payload = { ...formData, user: null }; // Add user: null to bypass requirement\r\n      if (editingEmployee) {\r\n        await axios.put(\r\n          `https://tomlin-backend.onrender.com/api/employees/${editingEmployee.id}/`,\r\n          payload\r\n        );\r\n      } else {\r\n        await axios.post(\r\n          \"https://tomlin-backend.onrender.com/api/employees/\",\r\n          payload\r\n        );\r\n      }\r\n      fetchEmployees();\r\n      closeForm();\r\n    } catch (error) {\r\n      console.error(\"Error submitting employee data:\", error);\r\n      alert(\r\n        \"Error: \" +\r\n          (error.response?.data\r\n            ? JSON.stringify(error.response.data)\r\n            : error.message)\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleEdit = (employee) => {\r\n    setEditingEmployee(employee);\r\n    setFormData(employee);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Are you sure you want to delete this employee?\"))\r\n      return;\r\n    try {\r\n      await axios.delete(\r\n        `https://tomlin-backend.onrender.com/api/employees/${id}/`\r\n      );\r\n      fetchEmployees();\r\n    } catch (error) {\r\n      console.error(\"Error deleting employee\", error);\r\n      alert(\"Failed to delete employee\");\r\n    }\r\n  };\r\n\r\n  const closeForm = () => {\r\n    setModalOpen(false);\r\n    setEditingEmployee(null);\r\n    setFormData({\r\n      first_name: \"\",\r\n      last_name: \"\",\r\n      email: \"\",\r\n      position: \"\",\r\n      salary: \"\",\r\n      hire_date: \"\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4 h-screen max-h-screen overflow-y-auto\">\r\n      <button\r\n        onClick={() => setModalOpen(true)}\r\n        className=\"px-4 py-2 bg-blue-500 text-white rounded\"\r\n      >\r\n        Add Employee\r\n      </button>\r\n      <table className=\"min-w-full mt-4 border border-gray-300\">\r\n        <thead>\r\n          <tr>\r\n            <th className=\"border px-4 py-2\">Name</th>\r\n            <th className=\"border px-4 py-2\">Email</th>\r\n            <th className=\"border px-4 py-2\">Position</th>\r\n            <th className=\"border px-4 py-2\">Salary</th>\r\n            <th className=\"border px-4 py-2\">Hire Date</th>\r\n            <th className=\"border px-4 py-2\">Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {employees.map((employee) => (\r\n            <tr key={employee.id}>\r\n              <td className=\"border px-4 py-2\">\r\n                {employee.first_name} {employee.last_name}\r\n              </td>\r\n              <td className=\"border px-4 py-2\">{employee.email}</td>\r\n              <td className=\"border px-4 py-2\">{employee.position}</td>\r\n              <td className=\"border px-4 py-2\">{employee.salary}</td>\r\n              <td className=\"border px-4 py-2\">{employee.hire_date}</td>\r\n              <td className=\"border px-4 py-2\">\r\n                <button\r\n                  onClick={() => handleEdit(employee)}\r\n                  className=\"px-3 py-1 bg-yellow-500 text-white rounded\"\r\n                >\r\n                  Edit\r\n                </button>\r\n                <button\r\n                  onClick={() => handleDelete(employee.id)}\r\n                  className=\"px-3 py-1 bg-red-500 text-white rounded ml-2\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      {modalOpen && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center\">\r\n          <div className=\"bg-white p-6 rounded shadow-lg w-96\">\r\n            <h2 className=\"text-xl font-bold mb-4\">\r\n              {editingEmployee ? \"Edit Employee\" : \"Add Employee\"}\r\n            </h2>\r\n            <form onSubmit={handleSubmit}>\r\n              {Object.keys(formData).map((field) => (\r\n                <div className=\"mb-4\" key={field}>\r\n                  <label className=\"block mb-1 capitalize\">\r\n                    {field.replace(\"_\", \" \")}\r\n                  </label>\r\n                  <input\r\n                    type={\r\n                      field === \"hire_date\"\r\n                        ? \"date\"\r\n                        : field === \"salary\"\r\n                        ? \"number\"\r\n                        : \"text\"\r\n                    }\r\n                    name={field}\r\n                    value={formData[field]}\r\n                    onChange={handleInputChange}\r\n                    className=\"border w-full p-2 rounded\"\r\n                    required\r\n                  />\r\n                </div>\r\n              ))}\r\n              <div className=\"flex justify-between mt-6\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={closeForm}\r\n                  className=\"px-4 py-2 bg-gray-500 text-white rounded\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-4 py-2 bg-green-500 text-white rounded\"\r\n                >\r\n                  Save\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmployeeList;","import React from \"react\";\r\nimport EmployeeList from \"../components/EmployeeList\"; \r\n\r\nconst EmployeesPage = () => {\r\n  return (\r\n    <div className=\"flex h-screen\">\r\n      <div className=\"flex flex-col flex-1\">\r\n        {/* Menu Management Section */}\r\n        <div className=\"p-6 bg-gray-100\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h1 className=\"text-3xl font-bold\">Employees Management</h1>\r\n          </div>\r\n\r\n          {/* âœ… Use the Updated InventoryList Component */}\r\n          <EmployeeList />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmployeesPage;\r\n"],"names":["EmployeeList","employees","setEmployees","useState","modalOpen","setModalOpen","editingEmployee","setEditingEmployee","formData","setFormData","useEffect","fetchEmployees","response","axios","error","handleInputChange","e","handleSubmit","payload","closeForm","_a","handleEdit","employee","handleDelete","id","jsxs","jsx","field","EmployeesPage"],"mappings":"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"}