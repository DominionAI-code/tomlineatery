{"version":3,"file":"Reports-DPvuU1vG.js","sources":["../../src/components/SummaryCard.jsx","../../src/components/SalesChart.jsx","../../src/pages/Reports.jsx"],"sourcesContent":["// src/components/SummaryCard.jsx\r\nimport React from \"react\";\r\n\r\nconst SummaryCard = ({ title, amount }) => {\r\n  return (\r\n    <div className=\"bg-white shadow-md rounded-2xl p-4 hover:shadow-xl transition duration-300\">\r\n      <h3 className=\"text-sm text-gray-500\">{title}</h3>\r\n      <p className=\"text-2xl font-semibold text-green-600\">\r\n        ${parseFloat(amount || 0).toFixed(2)}\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SummaryCard;\r\n","// src/components/SalesChart.jsx\r\nimport React from \"react\";\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  CartesianGrid,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\n\r\nconst SalesChart = ({ title, data, dataKey, labelKey }) => {\r\n  return (\r\n    <div className=\"bg-white p-6 rounded-2xl shadow-md hover:shadow-xl transition\">\r\n      <h2 className=\"text-lg font-bold mb-4\">{title}</h2>\r\n      <ResponsiveContainer width=\"100%\" height={300}>\r\n        <LineChart data={data}>\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis dataKey={labelKey} />\r\n          <YAxis />\r\n          <Tooltip />\r\n          <Line\r\n            type=\"monotone\"\r\n            dataKey={dataKey}\r\n            stroke=\"#10B981\"\r\n            strokeWidth={3}\r\n            dot={{ r: 4 }}\r\n          />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SalesChart;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport SummaryCard from \"../components/SummaryCard\";\r\nimport SalesChart from \"../components/SalesChart\";\r\nimport axios from \"axios\";\r\nimport dayjs from \"dayjs\"; \r\n\r\nconst Reports = () => {\r\n  const [reportData, setReportData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"https://tomlin-backend.onrender.com/api/reports/expenses/\")\r\n      .then((res) => {\r\n        setReportData(res.data);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Error fetching reports:\", err);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  if (loading || !reportData) {\r\n    return (\r\n      <div className=\"text-center p-8 text-gray-600\">\r\n        {loading ? \"Loading reports...\" : \"Failed to load reports.\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const {\r\n    summary = {},\r\n    daily_sales = [],\r\n    weekly_sales = [],\r\n    monthly_sales = [],\r\n    yearly_sales = [],\r\n  } = reportData;\r\n\r\n  // 🔍 Utility function to find total for a specific date format\r\n  const getTotalForDate = (list, key, targetDate) => {\r\n    const found = list.find((entry) => entry[key] === targetDate);\r\n    return found ? found.total : 0;\r\n  };\r\n\r\n  // 📅 Prepare Dates\r\n  const today = dayjs().format(\"YYYY-MM-DD\");\r\n  const yesterday = dayjs().subtract(1, \"day\").format(\"YYYY-MM-DD\");\r\n  const thisWeek = dayjs().startOf(\"week\").format(\"YYYY-MM-DD\");\r\n  const thisMonth = dayjs().startOf(\"month\").format(\"YYYY-MM-DD\");\r\n  const thisYear = dayjs().startOf(\"year\").format(\"YYYY-MM-DD\");\r\n\r\n  // 💰 Get totals\r\n  const today_total = getTotalForDate(daily_sales, \"day\", today);\r\n  const yesterday_total = getTotalForDate(daily_sales, \"day\", yesterday);\r\n  const week_total = getTotalForDate(weekly_sales, \"week\", thisWeek);\r\n  const month_total = getTotalForDate(monthly_sales, \"month\", thisMonth);\r\n  const year_total = getTotalForDate(yearly_sales, \"year\", thisYear);\r\n\r\n  return (\r\n    <div className=\"space-y-6 p-4 h-screen max-h-screen overflow-y-auto\">\r\n      <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n        <SummaryCard title=\"Today\" amount={today_total} />\r\n        <SummaryCard title=\"Yesterday\" amount={yesterday_total} />\r\n        <SummaryCard title=\"This Week\" amount={week_total} />\r\n        <SummaryCard title=\"This Month\" amount={month_total} />\r\n        <SummaryCard title=\"This Year\" amount={year_total} />\r\n      </div>\r\n\r\n      {/* 🚀 Financial Summary Section */}\r\n      {summary && (\r\n        <div className=\"bg-white shadow rounded-lg p-6 mt-6\">\r\n          <h2 className=\"text-xl font-bold mb-4 text-gray-800\">\r\n            📊 Financial Summary\r\n          </h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <div className=\"bg-blue-50 p-4 rounded shadow\">\r\n              <p className=\"text-blue-700 font-semibold\">Total Sales</p>\r\n              <p className=\"text-2xl font-bold text-blue-900\">\r\n                $\r\n                {typeof summary.total_sales === \"number\" &&\r\n                !isNaN(summary.total_sales)\r\n                  ? summary.total_sales.toFixed(2)\r\n                  : \"0.00\"}\r\n              </p>\r\n            </div>\r\n            <div className=\"bg-yellow-50 p-4 rounded shadow\">\r\n              <p className=\"text-yellow-700 font-semibold\">Inventory Expense</p>\r\n              <p className=\"text-2xl font-bold text-blue-900\">\r\n                $\r\n                {typeof summary.total_sales === \"number\" &&\r\n                !isNaN(summary.total_sales)\r\n                  ? summary.total_sales.toFixed(2)\r\n                  : \"0.00\"}\r\n              </p>\r\n            </div>\r\n            <div className=\"bg-red-50 p-4 rounded shadow\">\r\n              <p className=\"text-red-700 font-semibold\">Lease Expense</p>\r\n              <p className=\"text-2xl font-bold text-blue-900\">\r\n                $\r\n                {typeof summary.total_sales === \"number\" &&\r\n                !isNaN(summary.total_sales)\r\n                  ? summary.total_sales.toFixed(2)\r\n                  : \"0.00\"}\r\n              </p>\r\n            </div>\r\n            <div className=\"bg-purple-50 p-4 rounded shadow\">\r\n              <p className=\"text-purple-700 font-semibold\">Total Expense</p>\r\n              <p className=\"text-2xl font-bold text-blue-900\">\r\n                $\r\n                {typeof summary.total_sales === \"number\" &&\r\n                !isNaN(summary.total_sales)\r\n                  ? summary.total_sales.toFixed(2)\r\n                  : \"0.00\"}\r\n              </p>\r\n            </div>\r\n            <div\r\n              className={`p-4 rounded shadow ${\r\n                summary.profit >= 0 ? \"bg-green-50\" : \"bg-red-100\"\r\n              }`}\r\n            >\r\n              <p\r\n                className={`font-semibold ${\r\n                  summary.profit >= 0 ? \"text-green-700\" : \"text-red-700\"\r\n                }`}\r\n              >\r\n                Profit\r\n              </p>\r\n              <p\r\n                className={`text-2xl font-bold ${\r\n                  summary.profit >= 0 ? \"text-green-900\" : \"text-red-900\"\r\n                }`}\r\n              >\r\n                $\r\n                {typeof summary.total_sales === \"number\" &&\r\n                !isNaN(summary.total_sales)\r\n                  ? summary.total_sales.toFixed(2)\r\n                  : \"0.00\"}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        <SalesChart\r\n          title=\"📈 Daily Sales\"\r\n          data={daily_sales}\r\n          dataKey=\"total\"\r\n          labelKey=\"day\"\r\n        />\r\n        <SalesChart\r\n          title=\"📊 Weekly Sales\"\r\n          data={weekly_sales}\r\n          dataKey=\"total\"\r\n          labelKey=\"week\"\r\n        />\r\n        <SalesChart\r\n          title=\"📆 Monthly Sales\"\r\n          data={monthly_sales}\r\n          dataKey=\"total\"\r\n          labelKey=\"month\"\r\n        />\r\n        <SalesChart\r\n          title=\"📅 Yearly Sales\"\r\n          data={yearly_sales}\r\n          dataKey=\"total\"\r\n          labelKey=\"year\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reports;\r\n\r\n"],"names":["SummaryCard","title","amount","jsxs","jsx","SalesChart","data","dataKey","labelKey","ResponsiveContainer","LineChart","CartesianGrid","XAxis","YAxis","Tooltip","Line","Reports","reportData","setReportData","useState","loading","setLoading","useEffect","axios","res","err","summary","daily_sales","weekly_sales","monthly_sales","yearly_sales","getTotalForDate","list","key","targetDate","found","entry","today","dayjs","yesterday","thisWeek","thisMonth","thisYear","today_total","yesterday_total","week_total","month_total","year_total"],"mappings":"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"}